<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Статистика саппорта</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><rect x='0' y='0' width='24' height='24' rx='4' fill='%23FFD700'/><rect x='5' y='10' width='3' height='8' fill='black'/><rect x='10' y='7' width='3' height='11' fill='black'/><rect x='15' y='4' width='3' height='14' fill='black'/></svg>">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: #111011;
            padding: 15px;
            color: #e0e0e0;
            position: relative;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 450px;
            text-align: center;
            margin-top: -20px;
            z-index: 10;
        }
        
        h1 {
            margin-bottom: 20px;
            font-size: 2rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .counter {
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(8px);
            border-radius: 12px;
            padding: 15px;
            margin: 12px 0;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .counter-title {
            font-size: 1.5rem;
            margin-bottom: 12px;
            font-weight: 600;
        }
        
        .counter-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .counter-value {
            position: relative;
            font-size: 2.5rem;
            font-weight: bold;
            min-width: 100px;
            height: 1em;
            text-shadow: 0 2px 4px rgba(0,0,0,0.4);
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .counter-value input {
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .counter-buttons {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
            margin-left: auto;
        }
        
        button {
            cursor: pointer;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            outline: none !important;
        }
        
        button:active {
            transform: scale(0.92);
        }
        
        .btn-minus {
            background-color: #333;
            color: white;
            border: 1px solid #555;
            transition: all 0.3s ease;
        }
        
        .btn-plus {
            background-color: #333;
            color: white;
            border: 1px solid #555;
            transition: all 0.3s ease;
        }
        
        .btn-plus:hover, .btn-minus:hover {
            background-color: #555 !important;
        }
        
        .btn-plus:active {
            background-color: #FFD700 !important;
            border-color: #FFD700 !important;
            color: #333 !important;
            animation: plusPulse 0.3s ease;
        }
        
        .btn-minus:active {
            background-color: #ff6b6b !important;
            border-color: #ff6b6b !important;
            color: #333 !important;
            animation: minusPulse 0.3s ease;
        }
        
        @keyframes plusPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 215, 0, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 215, 0, 0);
            }
        }
        
        @keyframes minusPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 107, 107, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 107, 107, 0);
            }
        }
        
        button:focus, input:focus {
            outline: none !important;
            box-shadow: none !important;
        }
        
        .total-calls {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 12px;
            padding: 15px 20px;
            margin-top: 20px;
            font-size: 1.4rem;
            font-weight: bold;
            backdrop-filter: blur(8px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .total-text {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }
        
        .total-value {
            font-size: 2rem;
            color: #e0e0e0;
        }
        
        .total-reset {
            background: #333;
            color: white;
            border-radius: 8px;
            padding: 6px 12px;
            font-size: 0.9rem;
            border: 1px solid #555;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 70px;
            position: absolute;
            right: 23px;
        }
        
        .total-reset:hover {
            background: #555 !important;
        }
        
        .total-reset:active {
            transform: scale(0.92);
            background: #ff6b6b !important;
            border-color: #ff6b6b !important;
            color: #333 !important;
            animation: minusPulse 0.3s ease;
        }
        
        @keyframes resetShake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
            20%, 40%, 60%, 80% { transform: translateX(3px); }
        }
        
        .counter-value.resetting,
        .total-value.resetting {
            animation: resetShake 0.5s ease;
            color: #ff6b6b;
        }
        
        .info-line {
            margin-top: 12px;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            flex-wrap: wrap;
        }
        
        .info-value {
            font-weight: bold;
        }
        
        .escalation-low {
            color: #4cd137;
        }
        
        .escalation-medium {
            color: #FFD700;
        }
        
        .escalation-high {
            color: #ff6b6b;
        }
        
        .earnings {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 12px;
            padding: 12px 15px;
            margin-top: 12px;
            font-size: 1.2rem;
            font-weight: bold;
            backdrop-filter: blur(8px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .earnings-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #FFD700;
        }
        
        .settings-button {
            position: fixed;
            right: 15px;
            bottom: 90px;
            background: #333;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 1px solid #555;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
        }
        
        .settings-button:hover {
            background: #555 !important;
        }
        
        .settings-button:active {
            transform: scale(0.95);
        }
        
        .double-earnings {
            position: fixed;
            right: 15px;
            bottom: 160px;
            background: #333;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 1px solid #555;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
        }
        
        .double-earnings:hover {
            background: #555 !important;
        }
        
        .double-earnings:active {
            transform: scale(0.95);
        }
        
        .double-earnings.active {
            background: linear-gradient(135deg, #FFD700, #FFEC8B, #DAA520);
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
            animation: goldGlow 2s infinite alternate;
            color: #1a1a2e;
        }
        
        .double-earnings.active:hover {
            background: linear-gradient(135deg, #FFD700, #FFEC8B, #DAA520) !important;
        }
        
        @keyframes goldGlow {
            0% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
        }
        
        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .settings-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .settings-content {
            background: #222;
            border-radius: 12px;
            padding: 25px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid #444;
            transform: scale(0.8);
            transition: all 0.3s ease;
        }
        
        .settings-modal.active .settings-content {
            transform: scale(1);
        }
        
        .settings-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            color: #FFD700;
        }
        
        .setting-item {
            margin-bottom: 20px;
        }
        
        .setting-label {
            display: block;
            margin-bottom: 8px;
            font-size: 1rem;
        }
        
        .setting-input {
            width: 100%;
            padding: 10px 15px;
            background: #333;
            border: 1px solid #555;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        
        .setting-input:focus {
            border-color: #FFD700;
        }
        
        .settings-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            gap: 10px;
        }
        
        .btn-save, .btn-cancel {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            min-width: 0;
            white-space: nowrap;
        }
        
        .btn-save {
            background: #4cd137;
            color: white;
        }
        
        .btn-cancel {
            background: #555;
            color: white;
        }
        
        .btn-save:hover {
            background: #44bd32;
        }
        
        .btn-cancel:hover {
            background: #666;
        }
        
        .snowflake-button {
            position: fixed;
            right: 15px;
            bottom: 20px;
            background: #333;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 1px solid #555;
        }
        
        .snowflake-button:hover {
            background: #555 !important;
        }
        
        .snowflake-button:active {
            transform: scale(0.95);
        }
        
        .snowflake-button svg {
            width: 24px;
            height: 24px;
            transition: all 0.3s ease;
        }
        
        .snowflake-button.active {
            background: linear-gradient(135deg, #a8d8ff, #e6f3ff, #b3e0ff);
            border-color: #a8d8ff;
            box-shadow: 0 0 15px rgba(168, 216, 255, 0.7);
            animation: snowGlow 2s infinite alternate;
        }
        
        .snowflake-button.active svg path {
            stroke: #1a1a2e;
            transition: all 0.3s ease;
        }
        
        .snowflake-button.active:hover {
            background: linear-gradient(135deg, #a8d8ff, #e6f3ff, #b3e0ff) !important;
        }
        
        @keyframes snowGlow {
            0% { box-shadow: 0 0 10px rgba(168, 216, 255, 0.5); }
            100% { box-shadow: 0 0 20px rgba(168, 216, 255, 0.8); }
        }
        
        .tg-button {
            position: fixed;
            left: 15px;
            bottom: 20px;
            background: #333;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s ease;
            opacity: 0.8;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 1px solid #555;
        }
        
        .tg-button:hover {
            opacity: 1;
            background: #555 !important;
        }
        
        .tg-button svg {
            width: 24px;
            height: 24px;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3));
            transition: all 0.3s ease;
        }
        
        .floating-snowflake {
            position: fixed;
            z-index: 1;
            opacity: 0.8;
            pointer-events: none;
            animation: snowFall linear infinite;
            top: -50px;
        }
        
        @keyframes snowFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .version {
            position: fixed;
            top: 15px;
            left: 15px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.3);
            z-index: 1000;
            animation: versionGlow 2s infinite alternate;
            cursor: default;
            user-select: none;
        }
        
        .author {
            position: fixed;
            top: 15px;
            right: 15px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.3);
            z-index: 1000;
            animation: versionGlow 2s infinite alternate;
            cursor: default;
            user-select: none;
        }
        
        @keyframes versionGlow {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }
        
        .counter-value .display-value,
        .counter-value .edit-value {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 2.5rem;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.4);
        }
        
        .counter-value .edit-value {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
            background: transparent;
            border: none;
            outline: none;
            color: inherit;
            font-family: inherit;
            -moz-appearance: textfield;
            cursor: text;
            text-align: center;
            padding: 0;
        }
        
        .counter-value .edit-value:focus {
            border: none;
            outline: none;
        }
        
        .counter-value .edit-value::-webkit-outer-spin-button,
        .counter-value .edit-value::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .counter-value.editing .display-value {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }
        
        .counter-value.editing .edit-value {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }
        
        @keyframes highlight {
            0% { color: inherit; }
            50% { color: #FFD700; }
            100% { color: inherit; }
        }
        
        .counter-value .display-value.changed {
            animation: highlight 0.5s ease;
        }
        
        @media (max-width: 500px) {
            .container {
                max-width: 95%;
            }
            
            .counter-content {
                flex-direction: column;
                gap: 12px;
            }
            
            .counter-buttons {
                width: 100%;
                justify-content: center;
                gap: 4px;
                margin-left: 0;
            }
            
            .total-calls {
                font-size: 1.2rem;
                padding: 12px 15px;
            }
            
            .total-value {
                font-size: 1.8rem;
            }
            
            .info-line {
                font-size: 1rem;
            }
            
            .tg-button, .snowflake-button, .settings-button, .double-earnings {
                width: 44px;
                height: 44px;
            }
            
            .tg-button {
                left: 10px;
                bottom: 10px;
            }
            
            .snowflake-button {
                right: 10px;
                bottom: 10px;
            }
            
            .settings-button {
                right: 10px;
                bottom: 80px;
                font-size: 1rem;
            }
            
            .double-earnings {
                right: 10px;
                bottom: 150px;
                font-size: 1rem;
            }
            
            .tg-button svg {
                width: 22px;
                height: 22px;
            }
            
            .version, .author {
                top: 10px;
                font-size: 0.7rem;
            }
            
            .version {
                left: 10px;
            }
            
            .author {
                right: 10px;
            }
            
            .settings-buttons {
                flex-direction: column;
            }
            
            .btn-save, .btn-cancel {
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="version">v. 1.5</div>
    <div class="author">by lyoka</div>
    
    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <h2 class="settings-title">Стоимость действий</h2>
            <div class="setting-item">
                <label class="setting-label" for="resolvedCost">Стоимость "Решил сам":</label>
                <input type="number" class="setting-input" id="resolvedCost" step="0.01" min="0" placeholder="0.00">
            </div>
            <div class="setting-item">
                <label class="setting-label" for="escalatedCost">Стоимость "Эскал":</label>
                <input type="number" class="setting-input" id="escalatedCost" step="0.01" min="0" placeholder="0.00">
            </div>
            <div class="settings-buttons">
                <button class="btn-cancel" id="cancelSettings">Отмена</button>
                <button class="btn-save" id="saveSettings">Сохранить</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <h1>Статистика саппорта</h1>
        
        <div class="counter">
            <div class="counter-title">Решил сам</div>
            <div class="counter-content">
                <div class="counter-value" id="counter1">
                    <span class="display-value">0</span>
                    <input type="text" class="edit-value" maxlength="4">
                </div>
                <div class="counter-buttons">
                    <button class="btn-minus" onclick="changeCounter(1, -1)">-</button>
                    <button class="btn-plus" onclick="changeCounter(1, 1)">+</button>
                </div>
            </div>
        </div>
        
        <div class="counter">
            <div class="counter-title">Эскал</div>
            <div class="counter-content">
                <div class="counter-value" id="counter2">
                    <span class="display-value">0</span>
                    <input type="text" class="edit-value" maxlength="4">
                </div>
                <div class="counter-buttons">
                    <button class="btn-minus" onclick="changeCounter(2, -1)">-</button>
                    <button class="btn-plus" onclick="changeCounter(2, 1)">+</button>
                </div>
            </div>
        </div>
        
        <div class="counter">
            <div class="counter-title">Запрос RR</div>
            <div class="counter-content">
                <div class="counter-value" id="counter3">
                    <span class="display-value">0</span>
                    <input type="text" class="edit-value" maxlength="4">
                </div>
                <div class="counter-buttons">
                    <button class="btn-minus" onclick="changeCounter(3, -1)">-</button>
                    <button class="btn-plus" onclick="changeCounter(3, 1)">+</button>
                </div>
            </div>
        </div>
        
        <div class="total-calls">
            <div class="total-text">
                <span>Всего звонков:</span>
                <span class="total-value" id="totalCalls">0</span>
            </div>
            <button class="total-reset" id="totalReset">Сброс</button>
        </div>
        
        <div class="info-line">
            <span>Процент эскалов:</span>
            <span class="info-value" id="escalationPercent">0%</span>
        </div>
        
        <div class="earnings">
            <span>Общий заработок:</span>
            <span class="earnings-value" id="totalEarnings">0.00</span>
        </div>
    </div>
    
    <div class="double-earnings" id="doubleEarnings">
        X2
    </div>
    
    <div class="settings-button" id="settingsButton">
        БО
    </div>
    
    <div class="snowflake-button" id="snowflakeButton">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 1V23M1 12H23M6.5 6.5L17.5 17.5M17.5 6.5L6.5 17.5M12 4L9 8M12 4L15 8M12 20L9 16M12 20L15 16M4 12L8 9M4 12L8 15M20 12L16 9M20 12L16 15" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
        </svg>
    </div>
    
    <a href="https://t.me/oleh_dsgn" class="tg-button" target="_blank">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20.665 3.717L2.935 10.554c-1.324.529-1.31 1.271-.247 1.588l4.454 1.392 10.657-6.87c.498-.303.953-.14.579.192l-8.533 7.701h-.002l.002.001-.314 4.692c.47 0 .678-.211.93-.461l2.21-2.15 4.599 3.397c.848.47 1.457.227 1.668-.785l3.019-14.228c.309-1.239-.473-1.8-1.282-1.434z" fill="white"/>
        </svg>
    </a>

    <script>
        const counters = [0, 0, 0];
        let isDoubleActive = false;
        let resolvedCost = 0;
        let escalatedCost = 0;
        let snowflakeInterval = null;
        
        document.addEventListener("DOMContentLoaded", function() {
            const savedCounters = localStorage.getItem("supportCounters");
            if (savedCounters) {
                const parsed = JSON.parse(savedCounters);
                for (let i = 0; i < 3; i++) {
                    counters[i] = parsed[i];
                    const counterElement = document.getElementById(`counter${i+1}`);
                    counterElement.querySelector('.display-value').textContent = parsed[i];
                }
                updateCalculations();
            }
            
            const savedResolvedCost = localStorage.getItem("resolvedCost");
            if (savedResolvedCost) {
                resolvedCost = parseFloat(savedResolvedCost);
            }
            
            const savedEscalatedCost = localStorage.getItem("escalatedCost");
            if (savedEscalatedCost) {
                escalatedCost = parseFloat(savedEscalatedCost);
            }
            
            const savedDoubleState = localStorage.getItem("doubleEarnings");
            if (savedDoubleState === "true") {
                isDoubleActive = true;
                document.getElementById("doubleEarnings").classList.add("active");
            }
            
            document.getElementById("settingsButton").addEventListener("click", openSettings);
            document.getElementById("saveSettings").addEventListener("click", saveSettings);
            document.getElementById("cancelSettings").addEventListener("click", closeSettings);
            document.getElementById("doubleEarnings").addEventListener("click", toggleDouble);
            document.getElementById("snowflakeButton").addEventListener("click", toggleSnowflakes);
            document.getElementById("totalReset").addEventListener("click", resetAllCounters);
            
            updateEarnings();
            initManualInput();
        });
        
        function initManualInput() {
            const counterElements = document.querySelectorAll('.counter-value');
            
            counterElements.forEach(element => {
                element.addEventListener('dblclick', function() {
                    if (!this.classList.contains('editing')) {
                        activateEditing(this);
                    }
                });
                
                const input = element.querySelector('.edit-value');
                
                input.addEventListener('blur', function() {
                    finishManualInput(element);
                });
                
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        finishManualInput(element);
                    }
                });
                
                input.addEventListener('input', function() {
                    this.value = this.value.replace(/\D/g, '').slice(0, 4);
                });
            });
        }
        
        function activateEditing(element) {
            element.classList.add("editing");
            const input = element.querySelector('.edit-value');
            const span = element.querySelector('.display-value');
            input.value = span.textContent;
            input.focus();
            input.select();
        }
        
        function finishManualInput(element) {
            element.classList.remove("editing");
            const input = element.querySelector('.edit-value');
            const span = element.querySelector('.display-value');
            let newValue = parseInt(input.value) || 0;
            if (newValue < 0) newValue = 0;
            
            if (parseInt(span.textContent) !== newValue) {
                span.textContent = newValue;
                
                const counterId = element.id.replace('counter', '');
                const index = parseInt(counterId) - 1;
                counters[index] = newValue;
                
                updateCalculations();
                saveToLocalStorage();
                
                highlightValue(span);
            }
        }
        
        function highlightValue(element) {
            element.classList.add("changed");
            element.addEventListener('animationend', () => {
                element.classList.remove("changed");
            }, {once: true});
        }
        
        function openSettings() {
            const modal = document.getElementById("settingsModal");
            const resolvedInput = document.getElementById("resolvedCost");
            const escalatedInput = document.getElementById("escalatedCost");
            
            resolvedInput.value = resolvedCost || "";
            escalatedInput.value = escalatedCost || "";
            
            modal.classList.add("active");
        }
        
        function closeSettings() {
            const modal = document.getElementById("settingsModal");
            modal.classList.remove("active");
        }
        
        function saveSettings() {
            const resolvedInput = document.getElementById("resolvedCost");
            const escalatedInput = document.getElementById("escalatedCost");
            
            resolvedCost = parseFloat(resolvedInput.value) || 0;
            escalatedCost = parseFloat(escalatedInput.value) || 0;
            
            localStorage.setItem("resolvedCost", resolvedCost.toString());
            localStorage.setItem("escalatedCost", escalatedCost.toString());
            
            updateEarnings();
            closeSettings();
        }
        
        function toggleDouble() {
            isDoubleActive = !isDoubleActive;
            const button = document.getElementById("doubleEarnings");
            
            button.style.transform = "scale(1.1)";
            setTimeout(() => {
                button.style.transform = "scale(1)";
            }, 200);
            
            if (isDoubleActive) {
                button.classList.add("active");
            } else {
                button.classList.remove("active");
            }
            
            localStorage.setItem("doubleEarnings", isDoubleActive.toString());
            updateEarnings();
        }
        
        function updateEarnings() {
            const resolved = counters[0];
            const escalated = counters[1];
            
            let totalEarnings = (resolved * resolvedCost) + (escalated * escalatedCost);
            
            if (isDoubleActive) {
                totalEarnings *= 2;
            }
            
            document.getElementById("totalEarnings").textContent = 
                totalEarnings.toFixed(2);
        }
        
        function changeCounter(counterNumber, change) {
            const index = counterNumber - 1;
            counters[index] += change;
            if (counters[index] < 0) counters[index] = 0;
            
            const counterElement = document.getElementById(`counter${counterNumber}`);
            const span = counterElement.querySelector('.display-value');
            span.textContent = counters[index];
            
            updateCalculations();
            saveToLocalStorage();
        }
        
        function resetAllCounters() {
            const resetButton = document.getElementById("totalReset");
            resetButton.style.transform = "scale(0.92)";
            setTimeout(() => {
                resetButton.style.transform = "scale(1)";
            }, 200);
            
            const counterElements = document.querySelectorAll('.counter-value');
            const totalValue = document.getElementById("totalCalls");
            
            totalValue.classList.add("resetting");
            
            counterElements.forEach((element, index) => {
                element.classList.add("resetting");
                counters[index] = 0;
                const span = element.querySelector('.display-value');
                span.textContent = "0";
                
                setTimeout(() => {
                    element.classList.remove("resetting");
                }, 500);
            });
            
            setTimeout(() => {
                totalValue.classList.remove("resetting");
            }, 500);
            
            updateCalculations();
            saveToLocalStorage();
        }
        
        function updateCalculations() {
            updateTotalCalls();
            updateEscalationPercent();
            updateEarnings();
        }
        
        function updateTotalCalls() {
            const total = counters[0] + counters[1];
            document.getElementById("totalCalls").textContent = total;
        }
        
        function updateEscalationPercent() {
            const totalCalls = counters[0] + counters[1];
            let percent = 0;
            
            if (totalCalls > 0) {
                percent = (counters[1] / totalCalls) * 100;
            }
            
            const escalationElement = document.getElementById("escalationPercent");
            escalationElement.textContent = percent.toFixed(1) + '%';
            
            escalationElement.classList.remove('escalation-low', 'escalation-medium', 'escalation-high');
            
            if (percent <= 10) {
                escalationElement.classList.add('escalation-low');
            } else if (percent <= 15) {
                escalationElement.classList.add('escalation-medium');
            } else {
                escalationElement.classList.add('escalation-high');
            }
        }
        
        function saveToLocalStorage() {
            localStorage.setItem("supportCounters", JSON.stringify(counters));
        }
        
        const snowflakeSVGs = [
            `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1V23M1 12H23M6.5 6.5L17.5 17.5M17.5 6.5L6.5 17.5M12 4L9 8M12 4L15 8M12 20L9 16M12 20L15 16M4 12L8 9M4 12L8 15M20 12L16 9M20 12L16 15" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
            </svg>`,
            
            `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1V23M1 12H23M6.5 6.5L17.5 17.5M17.5 6.5L6.5 17.5M12 3L10 6M12 3L14 6M12 21L10 18M12 21L14 18M3 12L6 10M3 12L6 14M21 12L18 10M21 12L18 14M8.5 3.5L10.5 5.5M15.5 3.5L13.5 5.5M8.5 20.5L10.5 18.5M15.5 20.5L13.5 18.5M3.5 8.5L5.5 10.5M3.5 15.5L5.5 13.5M20.5 8.5L18.5 10.5M20.5 15.5L18.5 13.5" stroke="white" stroke-width="1" fill="none" stroke-linecap="round"/>
            </svg>`,
            
            `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1V23M1 12H23M6.5 6.5L17.5 17.5M17.5 6.5L6.5 17.5M12 5L8 9M12 5L16 9M12 19L8 15M12 19L16 15M5 12L9 8M5 12L9 16M19 12L15 8M19 12L15 16M7.5 2.5L9.5 4.5M16.5 2.5L14.5 4.5M7.5 21.5L9.5 19.5M16.5 21.5L14.5 19.5M2.5 7.5L4.5 9.5M2.5 16.5L4.5 14.5M21.5 7.5L19.5 9.5M21.5 16.5L19.5 14.5" stroke="white" stroke-width="1.2" fill="none" stroke-linecap="round"/>
            </svg>`,
            
            `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1V23M1 12H23M6.5 6.5L17.5 17.5M17.5 6.5L6.5 17.5M12 2L9 7M12 2L15 7M12 22L9 17M12 22L15 17M2 12L7 9M2 12L7 15M22 12L17 9M22 12L17 15M5.5 3.5L7.5 5.5M18.5 3.5L16.5 5.5M5.5 20.5L7.5 18.5M18.5 20.5L16.5 18.5M3.5 5.5L5.5 7.5M3.5 18.5L5.5 16.5M20.5 5.5L18.5 7.5M20.5 18.5L18.5 16.5" stroke="white" stroke-width="1.3" fill="none" stroke-linecap="round"/>
            </svg>`
        ];
        
        function toggleSnowflakes() {
            const snowflakeButton = document.getElementById("snowflakeButton");
            
            snowflakeButton.style.transform = "scale(1.1)";
            setTimeout(() => {
                snowflakeButton.style.transform = "scale(1)";
            }, 200);
            
            if (snowflakeInterval) {
                clearInterval(snowflakeInterval);
                snowflakeInterval = null;
                snowflakeButton.classList.remove("active");
            } else {
                snowflakeButton.classList.add("active");
                createSnowflakes();
                snowflakeInterval = setInterval(createSnowflakes, 300);
            }
        }
        
        function createSnowflakes() {
            const snowflake = document.createElement('div');
            snowflake.className = 'floating-snowflake';
            
            const randomSnowflake = snowflakeSVGs[Math.floor(Math.random() * snowflakeSVGs.length)];
            snowflake.innerHTML = randomSnowflake;
            
            const size = Math.random() * 20 + 15;
            const left = Math.random() * 100;
            const duration = Math.random() * 10 + 10;
            const delay = Math.random() * 5;
            
            snowflake.style.left = `${left}%`;
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            snowflake.style.animationDuration = `${duration}s`;
            snowflake.style.animationDelay = `${delay}s`;
            
            document.body.appendChild(snowflake);
            
            setTimeout(() => {
                if (snowflake.parentNode) {
                    snowflake.parentNode.removeChild(snowflake);
                }
            }, (duration + delay) * 1000);
        }
    </script>
</body>
</html>
